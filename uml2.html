<svg width="900" height="1200" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <!-- Import Google Font and define arrowhead marker -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Kalam:wght@400;700&display=swap');
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="8" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#191970"/>
    </marker>
  </defs>

  <!-- Common style attributes -->
  <style>
    .node-text {
      font-family: 'Kalam', cursive;
      fill: #191970;
    }
    .label-text {
      font-family: 'Kalam', cursive;
      font-size: 16px;
      fill: #191970;
    }
    .shape {
      fill: #ffffff;
      stroke: #191970;
      stroke-width: 1.5;
    }
    .flow-line {
      fill: none;
      stroke: #191970;
      stroke-width: 1.5;
      marker-end: url(#arrowhead);
    }
  </style>

  <!-- Title -->
  <text x="30" y="40" font-size="28" class="node-text" font-weight="bold">Activity Diagram</text>
  
  <!-- Start Node -->
  <circle cx="450" cy="70" r="12" fill="#191970" />
  <line x1="450" y1="82" x2="450" y2="100" class="flow-line" />
  
  <!-- Choose Subject -->
  <rect x="360" y="100" width="180" height="40" rx="15" class="shape" />
  <text x="400" y="125" font-size="18" class="node-text">Choose Subject</text>
  <line x1="450" y1="140" x2="450" y2="160" class="flow-line" />
  
  <!-- Start Learning Path -->
  <rect x="360" y="160" width="180" height="40" rx="15" class="shape" />
  <text x="380" y="185" font-size="18" class="node-text">Start Learning Path</text>
  <line x1="450" y1="200" x2="450" y2="220" class="flow-line" />
  
  <!-- Next Topic in Schedule Decision -->
  <polygon points="450,220 520,250 450,280 380,250" class="shape"/>
  <text x="405" y="250" font-size="16" class="node-text">Next topic</text>
  <text x="400" y="268" font-size="16" class="node-text">in schedule?</text>
  
  <!-- Yes/No Arrows from "Next Topic" Decision -->
  <text x="460" y="300" class="label-text">[Yes]</text>
  <text x="330" y="255" class="label-text">[No]</text>
  
  <!-- "No" path to Final End -->
  <polyline points="380,250 250,250 250,938" class="flow-line"/>

  <!-- "Yes" path to Platform Presents Topic -->
  <line x1="450" y1="280" x2="450" y2="310" class="flow-line" />
  
  <!-- Platform Presents Topic -->
  <rect x="360" y="310" width="180" height="40" rx="15" class="shape" />
  <text x="370" y="335" font-size="18" class="node-text">Platform Presents Topic</text>
  <line x1="450" y1="350" x2="450" y2="370" class="flow-line" />
  
  <!-- More Chunks for Topic Decision -->
  <polygon points="450,370 520,400 450,430 380,400" class="shape"/>
  <text x="405" y="400" font-size="16" class="node-text">More chunks</text>
  <text x="415" y="418" font-size="16" class="node-text">for topic?</text>
  
  <!-- Yes/No Arrows from "Chunks" Decision -->
  <text x="530" y="405" class="label-text">[Yes]</text>
  <text x="330" y="405" class="label-text">[No]</text>
  
  <!-- "Yes" Path: Inner Learning Loop -->
  <polyline points="520,400 610,400 610,450" class="flow-line"/>
  <rect x="520" y="450" width="180" height="50" rx="10" class="shape" />
  <text x="530" y="472" font-size="16" class="node-text">Display Next</text>
  <text x="530" y="490" font-size="16" class="node-text">Content Chunk</text>
  
  <line x1="610" y1="500" x2="610" y2="520" class="flow-line" />
  <rect x="520" y="520" width="180" height="50" rx="10" class="shape" />
  <text x="535" y="542" font-size="16" class="node-text">Present</text>
  <text x="535" y="560" font-size="16" class="node-text">Reinforcement Quiz</text>
  
  <line x1="610" y1="570" x2="610" y2="590" class="flow-line" />
  <rect x="520" y="590" width="180" height="40" rx="10" class="shape" />
  <text x="550" y="615" font-size="18" class="node-text">Answer Quiz</text>
  
  <!-- Arrow back to More Chunks for Topic -->
  <polyline points="610,630 610,660 450,660 450,430" class="flow-line"/>
  
  <!-- "No" Path: Final Quiz Flow -->
  <polyline points="380,400 250,400 250,450" class="flow-line"/>
  <rect x="160" y="450" width="180" height="40" rx="10" class="shape" />
  <text x="190" y="475" font-size="18" class="node-text">Final Topic Quiz</text>
  
  <line x1="250" y1="490" x2="250" y2="510" class="flow-line" />
  <rect x="160" y="510" width="180" height="40" rx="10" class="shape" />
  <text x="190" y="535" font-size="18" class="node-text">Take Topic Quiz</text>
  
  <line x1="250" y1="550" x2="250" y2="570" class="flow-line" />
  <!-- AI Service Box (Activity Partition) -->
  <rect x="120" y="570" width="260" height="120" rx="10" class="shape" stroke-dasharray="5,5" />
  <text x="130" y="590" font-size="16" class="node-text">AI Service</text>
  <rect x="130" y="600" width="240" height="40" rx="5" class="shape" />
  <text x="140" y="625" font-size="14" class="node-text">Generate Score & Feedback</text>
  <rect x="130" y="645" width="240" height="40" rx="5" class="shape" />
  <text x="140" y="670" font-size="14" class="node-text">Provide Instant Feedback</text>
  
  <line x1="250" y1="690" x2="250" y2="710" class="flow-line" />
  
  <!-- Has Score Met Decision -->
  <polygon points="250,710 320,740 250,770 180,740" class="shape"/>
  <text x="200" y="740" font-size="16" class="node-text">Score Met</text>
  <text x="215" y="758" font-size="16" class="node-text">Threshold?</text>
  
  <!-- Yes/No Arrows from "Score Met" -->
  <text x="130" y="745" class="label-text">[Yes]</text>
  <text x="330" y="745" class="label-text">[No]</text>
  
  <!-- "Yes" Path: Mark as Mastered and Loop -->
  <line x1="180" y1="740" x2="100" y2="740" class="flow-line" />
  <rect x="20" y="720" width="160" height="55" rx="10" class="shape" />
  <text x="30" y="742" font-size="16" class="node-text">Mark Topic as</text>
  <text x="55" y="762" font-size="16" class="node-text">Mastered</text>
  <!-- Loop back to "Next topic in schedule" -->
  <polyline points="100,775 100,800 50,800 50,250 380,250" class="flow-line"/>
  
  <!-- "No" Path: Remediation Loop -->
  <polyline points="320,740 700,740 700,330 540,330" class="flow-line"/>

  <!-- Final End Node -->
  <circle cx="250" cy="950" r="14" class="shape" stroke-width="2"/>
  <circle cx="250" cy="950" r="9" fill="#191970" />

</svg>